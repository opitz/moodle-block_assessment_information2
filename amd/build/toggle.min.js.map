{"version":3,"file":"toggle.min.js","sources":["../src/toggle.js"],"sourcesContent":["define(['jquery', 'core/config', 'core/str', 'core/modal_factory', 'core/modal_events'], function($) {\n    /* eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var toggleType = function() {\n                $(\".ai2-header\").on('click', function() {\n                    $(this).parent().find('.content').toggle();\n                    if ($(this).parent().find('.content').is(\":visible\")) {\n                        $(this).find('.icon').removeClass('fa-caret-right').addClass('fa-caret-down');\n                    } else {\n                        $(this).find('.icon').removeClass('fa-caret-down').addClass('fa-caret-right');\n                    }\n                    saveToggleState();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var saveToggleState = function() {\n                var toggleState = {};\n                $('.ai2-header').each(function() {\n                    var name = $(this).find('.mname').html();\n                    var state = 0;\n                    if ($(this).parent().find('.content').is(':visible')) {\n                        state = 1;\n                    }\n                    toggleState[name] = state;\n                });\n\n                // Now write the sequence for this course into the user preference\n                var courseid = $('#ao-courseid').html();\n                $.ajax({\n                    url: \"../blocks/assessment_information2/ajax/update_toggles.php\",\n                    type: \"POST\",\n                    data: {'courseid': courseid, 'toggle_state': JSON.stringify(toggleState), 'sesskey': M.cfg.sesskey},\n                    success: function(result) {\n                        if (result !== '') {\n                            console.log('Updated toggle state: ' + result);\n                        }\n                    }\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var initFunctions = function() {\n                // Initialise all required functions from above\n                toggleType();\n            };\n\n// _____________________________________________________________________________________________________________________\n            $(document).ready(function() {\n                initFunctions();\n                $('.ai2-header').css('cursor', 'pointer');\n            });\n        }\n    };\n});\n"],"names":["define","$","init","saveToggleState","toggleState","each","name","this","find","html","state","parent","is","courseid","ajax","url","type","data","JSON","stringify","M","cfg","sesskey","success","result","console","log","initFunctions","on","toggle","removeClass","addClass","document","ready","css"],"mappings":"AAAAA,8CAAO,CAAC,SAAU,cAAe,WAAY,qBAAsB,sBAAsB,SAASC,SAEvF,CACHC,KAAM,eAgBEC,gBAAkB,eACdC,YAAc,GAClBH,EAAE,eAAeI,MAAK,eACdC,KAAOL,EAAEM,MAAMC,KAAK,UAAUC,OAC9BC,MAAQ,EACRT,EAAEM,MAAMI,SAASH,KAAK,YAAYI,GAAG,cACrCF,MAAQ,GAEZN,YAAYE,MAAQI,aAIpBG,SAAWZ,EAAE,gBAAgBQ,OACjCR,EAAEa,KAAK,CACHC,IAAK,4DACLC,KAAM,OACNC,KAAM,UAAaJ,sBAA0BK,KAAKC,UAAUf,qBAAyBgB,EAAEC,IAAIC,SAC3FC,QAAS,SAASC,QACC,KAAXA,QACAC,QAAQC,IAAI,yBAA2BF,YAOnDG,cAAgB,WAtChB1B,EAAE,eAAe2B,GAAG,SAAS,WACzB3B,EAAEM,MAAMI,SAASH,KAAK,YAAYqB,SAC9B5B,EAAEM,MAAMI,SAASH,KAAK,YAAYI,GAAG,YACrCX,EAAEM,MAAMC,KAAK,SAASsB,YAAY,kBAAkBC,SAAS,iBAE7D9B,EAAEM,MAAMC,KAAK,SAASsB,YAAY,iBAAiBC,SAAS,kBAEhE5B,sBAqCRF,EAAE+B,UAAUC,OAAM,WACdN,gBACA1B,EAAE,eAAeiC,IAAI,SAAU"}